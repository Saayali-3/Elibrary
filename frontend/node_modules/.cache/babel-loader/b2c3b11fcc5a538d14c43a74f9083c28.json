{"ast":null,"code":"import axios from \"axios\";\nimport * as AT from \"./authTypes\"; // ACTION TYPES;\n\nconst FETCH_ALL_USERS = \"FETCH_ALL_USERS\";\nconst ADD_USER = \"ADD_USER\";\nconst EDIT_USER = \"EDIT_USER\";\nconst DELETE_USER = \"DELETE_USER\"; // ACTION CREATORS;\n\nconst fetchAllUser = users => {\n  return {\n    type: FETCH_ALL_USERS,\n    payload: users\n  };\n};\n\nconst addUser = user => {\n  return {\n    type: ADD_USER,\n    payload: user\n  };\n};\n\nconst editUser = user => {\n  return {\n    type: EDIT_USER,\n    payload: user\n  };\n};\n\nconst deleteUser = id => {\n  return {\n    type: DELETE_USER,\n    payload: id\n  };\n}; // THUNK CREATORS;\n\n\nexport const fetchAllUsersThunk = () => dispatch => {\n  return axios.get(\"/api/users\").then(res => res.data).then(users => dispatch(fetchAllUser(users))).catch(err => console.log(err));\n};\n/*export const fetchAuthenticateThunk =()=>(dispatch)=>{\n  return axios.\n}*/\n\nexport const authenticateUser = user => {\n  const credentials = {\n    username: \"test38\",\n    password: \"test\"\n  };\n  console.log(user);\n  return dispatch => {\n    dispatch({\n      type: AT.LOGIN_REQUEST\n    });\n    axios.post(\"http://localhost:8080/authenticate\", credentials).then(response => {\n      let token = response.data.token;\n      localStorage.setItem(\"jwtToken\", token);\n      dispatch(success({\n        username: response.data.username,\n        isLoggedIn: true\n      }));\n    }).then(res => res.data).catch(error => {\n      dispatch(failure());\n    });\n  };\n};\nexport const logoutUser = () => {\n  return dispatch => {\n    dispatch({\n      type: AT.LOGOUT_REQUEST\n    });\n    localStorage.removeItem(\"jwtToken\");\n    dispatch(success(false));\n  };\n};\n\nconst success = isLoggedIn => {\n  return {\n    type: AT.SUCCESS,\n    payload: isLoggedIn\n  };\n};\n\nconst failure = () => {\n  return {\n    type: AT.FAILURE,\n    payload: false\n  };\n};\n\nexport const addUserThunk = (user, ownProps) => dispatch => {\n  return axios.post(\"http://localhost:8080/register\", user).then(res => res.data).then(newUser => {\n    const tweakedUser = { ...newUser,\n      items: []\n    };\n    dispatch(addUser(tweakedUser));\n    ownProps.history.push(`/users/${newUser.id}`);\n  }).catch(err => console.log(err));\n};\nexport const editUserThunk = (id, user) => dispatch => {\n  return axios.put(`/api/users/${id}`, user).then(res => res.data).then(updatedUser => {\n    dispatch(editUser(updatedUser));\n  }).catch(err => console.log(err));\n};\nexport const deleteUserThunk = id => dispatch => {\n  return axios.delete(`/api/users/${id}`).then(res => res.data).then(() => dispatch(deleteUser(id))).catch(err => console.log(err));\n}; // REDUCER;\n\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n    case FETCH_ALL_USERS:\n      return action.payload;\n\n    case ADD_USER:\n      return [...state, action.payload];\n\n    case EDIT_USER:\n      return state.map(user => user.id === action.payload.id ? action.payload : user);\n\n    case DELETE_USER:\n      return state.filter(user => user.id !== action.payload);\n\n    case AT.SUCCESS:\n      return action.payload;\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["C:/Users/Jeevi/ttp-team-3-master/src/store/utilities/allUsers.js"],"names":["axios","AT","FETCH_ALL_USERS","ADD_USER","EDIT_USER","DELETE_USER","fetchAllUser","users","type","payload","addUser","user","editUser","deleteUser","id","fetchAllUsersThunk","dispatch","get","then","res","data","catch","err","console","log","authenticateUser","credentials","username","password","LOGIN_REQUEST","post","response","token","localStorage","setItem","success","isLoggedIn","error","failure","logoutUser","LOGOUT_REQUEST","removeItem","SUCCESS","FAILURE","addUserThunk","ownProps","newUser","tweakedUser","items","history","push","editUserThunk","put","updatedUser","deleteUserThunk","delete","reducer","state","action","map","filter"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport * as AT from \"./authTypes\";\n// ACTION TYPES;\nconst FETCH_ALL_USERS = \"FETCH_ALL_USERS\";\nconst ADD_USER = \"ADD_USER\";\nconst EDIT_USER = \"EDIT_USER\";\nconst DELETE_USER = \"DELETE_USER\";\n\n// ACTION CREATORS;\nconst fetchAllUser = (users) => {\n  return {\n    type: FETCH_ALL_USERS,\n    payload: users,\n  };\n};\n\nconst addUser = (user) => {\n  return {\n    type: ADD_USER,\n    payload: user,\n  };\n};\n\nconst editUser = (user) => {\n  return {\n    type: EDIT_USER,\n    payload: user,\n  };\n};\n\nconst deleteUser = (id) => {\n  return {\n    type: DELETE_USER,\n    payload: id,\n  };\n};\n\n// THUNK CREATORS;\nexport const fetchAllUsersThunk = () => (dispatch) => {\n  return axios\n    .get(\"/api/users\")\n    .then((res) => res.data)\n    .then((users) => dispatch(fetchAllUser(users)))\n    .catch((err) => console.log(err));\n};\n/*export const fetchAuthenticateThunk =()=>(dispatch)=>{\n  return axios.\n}*/\n\nexport const authenticateUser = (user) => {\n  const credentials = {\n    username: \"test38\",\n    password: \"test\",\n  };\n  console.log(user)\n  return (dispatch) => {\n    dispatch({\n      type: AT.LOGIN_REQUEST,\n    });\n    axios\n      .post(\"http://localhost:8080/authenticate\", credentials)\n      .then((response) => {\n        let token = response.data.token;\n        localStorage.setItem(\"jwtToken\", token);\n        dispatch(success({ username: response.data.username, isLoggedIn: true }));\n      })\n      .then((res) => res.data)\n      .catch((error) => {\n        dispatch(failure());\n      });\n  };\n};\n\nexport const logoutUser = () => {\n  return (dispatch) => {\n    dispatch({\n      type: AT.LOGOUT_REQUEST,\n    });\n    localStorage.removeItem(\"jwtToken\");\n    dispatch(success(false));\n  };\n};\n\nconst success = (isLoggedIn) => {\n  return {\n    type: AT.SUCCESS,\n    payload: isLoggedIn,\n  };\n};\n\nconst failure = () => {\n  return {\n    type: AT.FAILURE,\n    payload: false,\n  };\n};\n\nexport const addUserThunk = (user, ownProps) => (dispatch) => {\n\n  return axios\n    .post(\"http://localhost:8080/register\", user)\n    .then((res) => res.data)\n    .then((newUser) => {\n      const tweakedUser = { ...newUser, items: [] };\n      dispatch(addUser(tweakedUser));\n      ownProps.history.push(`/users/${newUser.id}`);\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const editUserThunk = (id, user) => (dispatch) => {\n  return axios\n    .put(`/api/users/${id}`, user)\n    .then((res) => res.data)\n    .then((updatedUser) => {\n      dispatch(editUser(updatedUser));\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const deleteUserThunk = (id) => (dispatch) => {\n  return axios\n    .delete(`/api/users/${id}`)\n    .then((res) => res.data)\n    .then(() => dispatch(deleteUser(id)))\n    .catch((err) => console.log(err));\n};\n\n// REDUCER;\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n    case FETCH_ALL_USERS:\n      return action.payload;\n    case ADD_USER:\n      return [...state, action.payload];\n    case EDIT_USER:\n      return state.map((user) =>\n        user.id === action.payload.id ? action.payload : user\n      );\n\n    case DELETE_USER:\n      return state.filter((user) => user.id !== action.payload);\n      case AT.SUCCESS:\n        return action.payload;\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n"]},"metadata":{},"sourceType":"module"}