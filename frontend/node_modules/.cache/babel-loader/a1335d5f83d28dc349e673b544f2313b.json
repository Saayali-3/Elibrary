{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jeevi\\\\ttp-team-3-master\\\\src\\\\components\\\\containers\\\\SignupFormContainer.js\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { SignupFormView } from \"../views\";\nimport { addUserThunk, fetchAllUsersThunk } from \"../../thunks\";\n\nclass SignupFormContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.validateUser = () => {\n      //check is the username length great than 5 and not duplicate username in database\n      const users = this.props.allUsers;\n      console.log(users);\n      const {\n        username\n      } = this.state;\n      let errors = { ...this.state.errors\n      };\n      let isValidName = true;\n\n      if (username.length < 5) {\n        isValidName = false;\n        errors.username = \"Invalid username, please enter more than 4 characters\";\n      }\n\n      for (let i = 0; i < users.length; i++) {\n        if (this.state.username === users[i].username) {\n          isValidName = false;\n          errors.username = \"Invalid username, duplicate name\";\n          break;\n        }\n      }\n\n      if (isValidName) {\n        this.props.addUser(this.state);\n        errors.username = \"valid username\";\n        return this.props.history.push(\"/verification\");\n      }\n\n      this.setState({\n        isValidName,\n        errors\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      this.validateUser();\n    };\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      email: \"\",\n      isValidName: false,\n      errors: {}\n    };\n  }\n\n  componentDidMount() {\n    this.props.fetchAllUsers();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }\n    }, this.state.isValidName ? \"\" : this.state.errors.username), /*#__PURE__*/React.createElement(SignupFormView, {\n      username: this.state.username,\n      password: this.state.password,\n      email: this.state.email,\n      handleSubmit: this.handleSubmit,\n      handleChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nconst mapState = state => {\n  console.log(state);\n  return {\n    allUsers: state.allUsers.payload\n  };\n};\n\nconst mapDispatch = (dispatch, ownProps) => {\n  return {\n    fetchAllUsers: () => dispatch(fetchAllUsersThunk()),\n    addUser: User => dispatch(addUserThunk(User, ownProps))\n  };\n};\n\nSignupFormContainer.propTypes = {\n  allUsers: PropTypes.array.isRequired,\n  addUser: PropTypes.func.isRequired\n};\nexport default connect(mapState, mapDispatch)(SignupFormContainer);","map":{"version":3,"sources":["C:/Users/Jeevi/ttp-team-3-master/src/components/containers/SignupFormContainer.js"],"names":["React","Component","PropTypes","connect","SignupFormView","addUserThunk","fetchAllUsersThunk","SignupFormContainer","constructor","props","handleChange","e","setState","target","name","value","validateUser","users","allUsers","console","log","username","state","errors","isValidName","length","i","addUser","history","push","handleSubmit","preventDefault","password","email","componentDidMount","fetchAllUsers","render","mapState","payload","mapDispatch","dispatch","ownProps","User","propTypes","array","isRequired","func"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { SignupFormView } from \"../views\";\nimport { addUserThunk,fetchAllUsersThunk } from \"../../thunks\";\n\nclass SignupFormContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\",\n      email: \"\",\n      isValidName: false,\n      errors: {},\n    };\n  }\n  componentDidMount() {\n    this.props.fetchAllUsers();\n  }\n\n  handleChange = (e) => {\n\n      this.setState({\n        [e.target.name]: e.target.value,\n      });\n  };\n\n  validateUser = () => {\n      //check is the username length great than 5 and not duplicate username in database\n      const users=this.props.allUsers;\n      console.log(users)\n    const { username } = this.state;\n    let errors = { ...this.state.errors };\n    let isValidName = true;\n    if (username.length < 5) {\n      isValidName = false;\n      errors.username = \"Invalid username, please enter more than 4 characters\";\n    }\n    for(let i=0;i<users.length;i++){\n      if(this.state.username===users[i].username){\n        isValidName = false;\n        errors.username = \"Invalid username, duplicate name\";\n       break;\n     }\n   }\n    if (isValidName) {\n      this.props.addUser(this.state)\n      errors.username = \"valid username\";\n      return this.props.history.push(\"/verification\");\n    }\n    this.setState({ isValidName, errors });\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.validateUser();\n  };\n \n  render() {\n    return (\n      <>\n        {/* Can potentially be extracted into its own ErrorMessage component */}\n        <div className=\"text-danger\">\n        {this.state.isValidName ? \"\" : this.state.errors.username}\n        </div>\n        <SignupFormView\n          username={this.state.username}\n          password={this.state.password}\n          email={this.state.email}\n          handleSubmit={this.handleSubmit}\n          handleChange={this.handleChange}\n        />\n      </>\n    );\n  }\n}\nconst mapState = (state) => {\n  console.log(state)\n  return {\n    allUsers: state.allUsers.payload,\n  };\n};\nconst mapDispatch = (dispatch, ownProps) => {\n  return {\n    fetchAllUsers: () => dispatch(fetchAllUsersThunk()),\n    addUser: (User) => dispatch(addUserThunk(User, ownProps)),\n  };\n};\n\nSignupFormContainer.propTypes = {\n  allUsers: PropTypes.array.isRequired,\n  addUser: PropTypes.func.isRequired,\n};\n\nexport default connect(mapState, mapDispatch)(SignupFormContainer);"]},"metadata":{},"sourceType":"module"}