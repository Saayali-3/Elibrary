{"ast":null,"code":"import axios from \"axios\"; // ACTION TYPES;\n\nconst FETCH_ALL_ITEMS = \"FETCH_ALL_ITEMS\";\nconst ADD_ITEM = \"ADD_ITEM\";\nconst EDIT_ITEM = \"EDIT_ITEM\";\nconst DELETE_ITEM = \"DELETE_ITEM\"; // ACTION CREATORS;\n\nconst fetchAllItems = books => {\n  return {\n    type: FETCH_ALL_ITEMS,\n    payload: books\n  };\n};\n\nconst addItem = item => {\n  return {\n    type: ADD_ITEM,\n    payload: item\n  };\n};\n\nconst editItem = item => {\n  return {\n    type: EDIT_ITEM,\n    payload: item\n  };\n};\n\nconst deleteItem = id => {\n  return {\n    type: DELETE_ITEM,\n    payload: id\n  };\n}; // THUNK CREATORS;\n\n\nexport const fetchAllItemsThunk = () => dispatch => {\n  return axios.get(\"/api/books\").then(res => res.data).then(books => dispatch(fetchAllItems(books))).catch(err => console.log(err));\n};\nexport const addItemThunk = (item, ownProps) => dispatch => {\n  console.log(item);\n  return axios.post(\"/api/books\", item).then(res => res.data).then(newUser => {\n    console.log(newUser);\n    const tweakedUser = { ...newUser,\n      books: []\n    };\n    dispatch(addItem(tweakedUser));\n    ownProps.history.push(`/cart/`);\n  }).catch(err => console.log(err));\n};\nexport const editItemThunk = (id, item) => dispatch => {\n  return axios.put(`/api/books/${id}`, item).then(res => res.data).then(updatedUser => {\n    dispatch(editItem(updatedUser));\n  }).catch(err => console.log(err));\n};\nexport const deleteItemThunk = id => dispatch => {\n  return axios.delete(`/api/books/${id}`).then(res => res.data).then(() => dispatch(deleteItem(id))).catch(err => console.log(err));\n}; // REDUCER;\n\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n    case FETCH_ALL_ITEMS:\n      return action.payload;\n\n    case ADD_ITEM:\n      return [...state, action.payload];\n\n    case EDIT_ITEM:\n      return state.map(item => item.id === action.payload.id ? action.payload : item);\n\n    case DELETE_ITEM:\n      return state.filter(item => item.id !== action.payload);\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["C:/Users/Jeevi/ttp-team-3-master/src/store/utilities/allItems.js"],"names":["axios","FETCH_ALL_ITEMS","ADD_ITEM","EDIT_ITEM","DELETE_ITEM","fetchAllItems","books","type","payload","addItem","item","editItem","deleteItem","id","fetchAllItemsThunk","dispatch","get","then","res","data","catch","err","console","log","addItemThunk","ownProps","post","newUser","tweakedUser","history","push","editItemThunk","put","updatedUser","deleteItemThunk","delete","reducer","state","action","map","filter"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AACA,MAAMC,eAAe,GAAG,iBAAxB;AACA,MAAMC,QAAQ,GAAG,UAAjB;AACA,MAAMC,SAAS,GAAG,WAAlB;AACA,MAAMC,WAAW,GAAG,aAApB,C,CAEA;;AACA,MAAMC,aAAa,GAAIC,KAAD,IAAW;AAC/B,SAAO;AACLC,IAAAA,IAAI,EAAEN,eADD;AAELO,IAAAA,OAAO,EAAEF;AAFJ,GAAP;AAID,CALD;;AAOA,MAAMG,OAAO,GAAIC,IAAD,IAAU;AACxB,SAAO;AACLH,IAAAA,IAAI,EAAEL,QADD;AAELM,IAAAA,OAAO,EAAEE;AAFJ,GAAP;AAID,CALD;;AAOA,MAAMC,QAAQ,GAAID,IAAD,IAAU;AACzB,SAAO;AACLH,IAAAA,IAAI,EAAEJ,SADD;AAELK,IAAAA,OAAO,EAAEE;AAFJ,GAAP;AAID,CALD;;AAOA,MAAME,UAAU,GAAIC,EAAD,IAAQ;AACzB,SAAO;AACLN,IAAAA,IAAI,EAAEH,WADD;AAELI,IAAAA,OAAO,EAAEK;AAFJ,GAAP;AAID,CALD,C,CAOA;;;AACA,OAAO,MAAMC,kBAAkB,GAAG,MAAOC,QAAD,IAAc;AACpD,SAAOf,KAAK,CACTgB,GADI,CACA,YADA,EAEJC,IAFI,CAEEC,GAAD,IAASA,GAAG,CAACC,IAFd,EAGJF,IAHI,CAGEX,KAAD,IAAWS,QAAQ,CAACV,aAAa,CAACC,KAAD,CAAd,CAHpB,EAIJc,KAJI,CAIGC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAJX,CAAP;AAKD,CANM;AAQP,OAAO,MAAMG,YAAY,GAAG,CAACd,IAAD,EAAOe,QAAP,KAAqBV,QAAD,IAAc;AAC5DO,EAAAA,OAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,SAAOV,KAAK,CACT0B,IADI,CACC,YADD,EACehB,IADf,EAEJO,IAFI,CAEEC,GAAD,IAASA,GAAG,CAACC,IAFd,EAGJF,IAHI,CAGEU,OAAD,IAAa;AACjBL,IAAAA,OAAO,CAACC,GAAR,CAAYI,OAAZ;AACA,UAAMC,WAAW,GAAG,EAAE,GAAGD,OAAL;AAAcrB,MAAAA,KAAK,EAAE;AAArB,KAApB;AACAS,IAAAA,QAAQ,CAACN,OAAO,CAACmB,WAAD,CAAR,CAAR;AACCH,IAAAA,QAAQ,CAACI,OAAT,CAAiBC,IAAjB,CAAuB,QAAvB;AACF,GARI,EASJV,KATI,CASGC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CATX,CAAP;AAUD,CAZM;AAcP,OAAO,MAAMU,aAAa,GAAG,CAAClB,EAAD,EAAKH,IAAL,KAAeK,QAAD,IAAc;AACvD,SAAOf,KAAK,CACTgC,GADI,CACC,cAAanB,EAAG,EADjB,EACoBH,IADpB,EAEJO,IAFI,CAEEC,GAAD,IAASA,GAAG,CAACC,IAFd,EAGJF,IAHI,CAGEgB,WAAD,IAAiB;AACrBlB,IAAAA,QAAQ,CAACJ,QAAQ,CAACsB,WAAD,CAAT,CAAR;AACD,GALI,EAMJb,KANI,CAMGC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CANX,CAAP;AAOD,CARM;AAUP,OAAO,MAAMa,eAAe,GAAIrB,EAAD,IAASE,QAAD,IAAc;AACnD,SAAOf,KAAK,CACTmC,MADI,CACI,cAAatB,EAAG,EADpB,EAEJI,IAFI,CAEEC,GAAD,IAASA,GAAG,CAACC,IAFd,EAGJF,IAHI,CAGC,MAAMF,QAAQ,CAACH,UAAU,CAACC,EAAD,CAAX,CAHf,EAIJO,KAJI,CAIGC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAJX,CAAP;AAKD,CANM,C,CAQP;;AACA,MAAMe,OAAO,GAAG,CAACC,KAAK,GAAG,EAAT,EAAaC,MAAb,KAAwB;AACtC,UAAQA,MAAM,CAAC/B,IAAf;AACE,SAAKN,eAAL;AACE,aAAOqC,MAAM,CAAC9B,OAAd;;AACF,SAAKN,QAAL;AACE,aAAO,CAAC,GAAGmC,KAAJ,EAAWC,MAAM,CAAC9B,OAAlB,CAAP;;AACF,SAAKL,SAAL;AACE,aAAOkC,KAAK,CAACE,GAAN,CAAW7B,IAAD,IACfA,IAAI,CAACG,EAAL,KAAYyB,MAAM,CAAC9B,OAAP,CAAeK,EAA3B,GAAgCyB,MAAM,CAAC9B,OAAvC,GAAiDE,IAD5C,CAAP;;AAIF,SAAKN,WAAL;AACE,aAAOiC,KAAK,CAACG,MAAN,CAAc9B,IAAD,IAAUA,IAAI,CAACG,EAAL,KAAYyB,MAAM,CAAC9B,OAA1C,CAAP;;AACF;AACE,aAAO6B,KAAP;AAbJ;AAeD,CAhBD;;AAkBA,eAAeD,OAAf","sourcesContent":["import axios from \"axios\";\n// ACTION TYPES;\nconst FETCH_ALL_ITEMS = \"FETCH_ALL_ITEMS\";\nconst ADD_ITEM = \"ADD_ITEM\";\nconst EDIT_ITEM = \"EDIT_ITEM\";\nconst DELETE_ITEM = \"DELETE_ITEM\";\n\n// ACTION CREATORS;\nconst fetchAllItems = (books) => {\n  return {\n    type: FETCH_ALL_ITEMS,\n    payload: books,\n  };\n};\n\nconst addItem = (item) => {\n  return {\n    type: ADD_ITEM,\n    payload: item,\n  };\n};\n\nconst editItem = (item) => {\n  return {\n    type: EDIT_ITEM,\n    payload: item,\n  };\n};\n\nconst deleteItem = (id) => {\n  return {\n    type: DELETE_ITEM,\n    payload: id,\n  };\n};\n\n// THUNK CREATORS;\nexport const fetchAllItemsThunk = () => (dispatch) => {\n  return axios\n    .get(\"/api/books\")\n    .then((res) => res.data)\n    .then((books) => dispatch(fetchAllItems(books)))\n    .catch((err) => console.log(err));\n};\n\nexport const addItemThunk = (item, ownProps) => (dispatch) => {\n  console.log(item)\n  return axios\n    .post(\"/api/books\", item)\n    .then((res) => res.data)\n    .then((newUser) => {\n      console.log(newUser)\n      const tweakedUser = { ...newUser, books: [] };\n      dispatch(addItem(tweakedUser));\n       ownProps.history.push(`/cart/`);\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const editItemThunk = (id, item) => (dispatch) => {\n  return axios\n    .put(`/api/books/${id}`, item)\n    .then((res) => res.data)\n    .then((updatedUser) => {\n      dispatch(editItem(updatedUser));\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const deleteItemThunk = (id) => (dispatch) => {\n  return axios\n    .delete(`/api/books/${id}`)\n    .then((res) => res.data)\n    .then(() => dispatch(deleteItem(id)))\n    .catch((err) => console.log(err));\n};\n\n// REDUCER;\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n    case FETCH_ALL_ITEMS:\n      return action.payload;\n    case ADD_ITEM:\n      return [...state, action.payload];\n    case EDIT_ITEM:\n      return state.map((item) =>\n        item.id === action.payload.id ? action.payload : item\n      );\n\n    case DELETE_ITEM:\n      return state.filter((item) => item.id !== action.payload);\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n"]},"metadata":{},"sourceType":"module"}